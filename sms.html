function sendSMS(timeRange) {
    const urlParams = new URLSearchParams(window.location.search);
    let tel = urlParams.get("tel");

    if (!tel) {
        alert("Phone number is missing!");
        return;
    }

    let message = timeRange ? `I am on my way and should be there ${timeRange}. -LG Direct Service Technician` : '';

    if (message) {
        // Use intent URL for greater compatibility
        window.location.href = `intent://send/${tel}#Intent;scheme=smsto;package=com.google.android.apps.messaging;S.android.intent.extra.TEXT=${encodeURIComponent(message)};end`;
    } else {
        window.location.href = `intent://send/${tel}#Intent;scheme=smsto;package=com.google.android.apps.messaging;end`;
    }

    // Minimize or close the browser if possible
    setTimeout(() => {
        if (window.AndroidInterface && window.AndroidInterface.closeWindow) {
            window.AndroidInterface.closeWindow();
        } else {
            window.blur();
            window.open('', '_self', '');
            window.close();
        }
    }, 500);
}
